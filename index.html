<!DOCTYPE html>
<html lang="bn">
<head>
<meta charset="UTF-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1.0"/>
<title>WinGo Signal</title>
<style>
*{margin:0;padding:0;box-sizing:border-box}
body{font-family:Arial,sans-serif;background:linear-gradient(135deg,#667eea,#764ba2);min-height:100vh;padding:15px}
.container{max-width:900px;margin:0 auto}
.box{background:#fff;border-radius:15px;padding:20px;margin-bottom:15px;box-shadow:0 10px 30px rgba(0,0,0,.3)}
.header{text-align:center;font-size:28px;font-weight:800;color:#764ba2;margin-bottom:10px}
.subtitle{text-align:center;color:#666;font-size:12px;letter-spacing:2px;margin-bottom:10px}
.group-badge{display:inline-block;padding:8px 20px;border-radius:25px;font-weight:700;color:#fff;margin-top:10px;font-size:14px}
.group-a{background:linear-gradient(135deg,#f093fb,#f5576c)}
.group-b{background:linear-gradient(135deg,#4facfe,#00f2fe)}
.pred-box{text-align:center}
.pred-title{color:#764ba2;font-size:14px;font-weight:700;margin-bottom:15px}
.pred-result{font-size:60px;font-weight:900;margin:15px 0}
.pred-big{color:#f5576c}
.pred-small{color:#00f2fe}
.conf-badge{display:inline-block;background:linear-gradient(135deg,#667eea,#764ba2);color:#fff;padding:10px 25px;border-radius:25px;font-weight:700;font-size:13px;margin:5px}
.info{background:rgba(102,126,234,.1);border-radius:10px;padding:15px;margin-top:10px;font-size:13px;color:#764ba2;font-weight:600;line-height:1.6}
.stats{display:grid;grid-template-columns:repeat(4,1fr);gap:10px;margin-bottom:15px}
.stat{background:#fff;border-radius:10px;padding:15px;text-align:center;box-shadow:0 5px 15px rgba(0,0,0,.2)}
.stat-label{font-size:11px;color:#888;margin-bottom:5px;text-transform:uppercase}
.stat-value{font-size:24px;font-weight:900;color:#764ba2}
table{width:100%;border-collapse:collapse}
thead{background:linear-gradient(135deg,#667eea,#764ba2)}
th{padding:12px 8px;color:#fff;font-size:12px;font-weight:700;text-align:center}
td{padding:12px 8px;text-align:center;font-size:12px;border-bottom:1px solid #f0f0f0}
.num-cell{font-size:24px;font-weight:900}
.size-big{background:linear-gradient(135deg,#f093fb,#f5576c);color:#fff;padding:4px 12px;border-radius:15px;font-size:10px;font-weight:700;display:inline-block}
.size-small{background:linear-gradient(135deg,#4facfe,#00f2fe);color:#fff;padding:4px 12px;border-radius:15px;font-size:10px;font-weight:700;display:inline-block}
.current{background:rgba(255,215,0,.2);border-left:4px solid #ffd700}
.btn{position:fixed;bottom:20px;right:20px;background:linear-gradient(135deg,#667eea,#764ba2);color:#fff;border:none;padding:15px 30px;border-radius:30px;font-size:14px;font-weight:700;cursor:pointer;box-shadow:0 5px 20px rgba(102,126,234,.5);z-index:999}
.btn:active{transform:scale(.95)}
.time{text-align:center;padding:15px;background:rgba(255,255,255,.2);border-radius:10px;color:#fff;font-size:28px;font-weight:900;letter-spacing:2px}
.loading{text-align:center;padding:20px;color:#764ba2;font-weight:600}
.error{background:#ff4757;color:#fff;padding:10px;border-radius:5px;text-align:center;margin:10px 0}
@media(max-width:768px){.header{font-size:24px}.pred-result{font-size:45px}.stats{grid-template-columns:repeat(2,1fr)}th,td{padding:10px 5px;font-size:11px}.num-cell{font-size:20px}}
</style>
</head>
<body>
<div class="container">

<div class="box">
<div class="header">‚ö° WINGO SIGNAL</div>
<div class="subtitle">A/B PATTERN PREDICTION</div>
<div style="text-align:center"><span id="groupBadge"></span></div>
</div>

<div class="box pred-box">
<div class="pred-title">üéØ ‡¶™‡¶∞‡¶¨‡¶∞‡ßç‡¶§‡ßÄ ‡¶™‡¶ø‡¶∞‡¶ø‡¶Ø‡¶º‡¶° ‡¶™‡ßç‡¶∞‡ßá‡¶°‡¶ø‡¶ï‡¶∂‡¶®</div>
<div class="pred-result" id="predResult">‡¶≤‡ßã‡¶° ‡¶π‡¶ö‡ßç‡¶õ‡ßá...</div>
<div><span class="conf-badge" id="confBadge">‡¶Ö‡¶™‡ßá‡¶ï‡ßç‡¶∑‡¶æ ‡¶ï‡¶∞‡ßÅ‡¶®...</span></div>
<div class="info" id="info">‡¶°‡ßá‡¶ü‡¶æ ‡¶≤‡ßã‡¶° ‡¶ï‡¶∞‡¶æ ‡¶π‡¶ö‡ßç‡¶õ‡ßá...</div>
</div>

<div class="stats">
<div class="stat"><div class="stat-label">‡¶¨‡¶∞‡ßç‡¶§‡¶Æ‡¶æ‡¶® ‡¶™‡¶ø‡¶∞‡¶ø‡¶Ø‡¶º‡¶°</div><div class="stat-value" id="period">-</div></div>
<div class="stat"><div class="stat-label">‡¶¨‡¶∞‡ßç‡¶§‡¶Æ‡¶æ‡¶® ‡¶ó‡ßç‡¶∞‡ßÅ‡¶™</div><div class="stat-value" id="group">-</div></div>
<div class="stat"><div class="stat-label">‡¶™‡¶ø‡¶∞‡¶ø‡¶Ø‡¶º‡¶° ‡¶∏‡ßç‡¶≤‡¶ü</div><div class="stat-value" id="slot">-</div></div>
<div class="stat"><div class="stat-label">‡¶ß‡¶æ‡¶∞‡¶æ‡¶¨‡¶æ‡¶π‡¶ø‡¶ï ‡¶≤‡¶∏</div><div class="stat-value" id="loss" style="color:#ff4757">0</div></div>
</div>

<div class="box">
<table>
<thead><tr><th>‡¶™‡¶ø‡¶∞‡¶ø‡¶Ø‡¶º‡¶°</th><th>‡¶ó‡ßç‡¶∞‡ßÅ‡¶™</th><th>‡¶∏‡ßç‡¶≤‡¶ü</th><th>‡¶®‡¶æ‡¶Æ‡ßç‡¶¨‡¶æ‡¶∞</th><th>‡¶∏‡¶æ‡¶á‡¶ú</th></tr></thead>
<tbody id="tbody"><tr><td colspan="5" class="loading">‡¶≤‡ßã‡¶° ‡¶π‡¶ö‡ßç‡¶õ‡ßá...</td></tr></tbody>
</table>
</div>

<div class="box time" id="time">00:00:00</div>

</div>

<button class="btn" onclick="load()">üîÑ ‡¶∞‡¶ø‡¶´‡ßç‡¶∞‡ßá‡¶∂</button>

<script>
const API = 'https://draw.ar-lottery01.com/WinGo/WinGo_30S/GetHistoryIssuePage.json';

// A ‡¶ó‡ßç‡¶∞‡ßÅ‡¶™ - ‡¶∏‡¶Ç‡¶ñ‡ßç‡¶Ø‡¶æ ‡¶™‡ßç‡¶Ø‡¶æ‡¶ü‡¶æ‡¶∞‡ßç‡¶® (‡¶≤‡¶æ‡¶∏‡ßç‡¶ü ‡¶∞‡ßá‡¶ú‡¶æ‡¶≤‡ßç‡¶ü ‚Üí ‡¶™‡¶∞‡¶¨‡¶∞‡ßç‡¶§‡ßÄ ‡¶∞‡ßá‡¶ú‡¶æ‡¶≤‡ßç‡¶ü)
const PATTERN_A = {
    0: 5, // SMALL ‚Üí BIG
    1: 8, // SMALL ‚Üí BIG
    2: 6, // SMALL ‚Üí BIG
    3: 8, // SMALL ‚Üí BIG
    4: 8, // SMALL ‚Üí BIG
    5: 0, // BIG ‚Üí SMALL
    6: 7, // BIG ‚Üí BIG
    7: 6, // BIG ‚Üí BIG
    8: 0, // BIG ‚Üí SMALL
    9: 2  // BIG ‚Üí SMALL
};

// A ‡¶ó‡ßç‡¶∞‡ßÅ‡¶™ - ‡¶∏‡ßç‡¶≤‡¶ü ‡¶™‡ßç‡¶Ø‡¶æ‡¶ü‡¶æ‡¶∞‡ßç‡¶®
const SLOT_A = ['BIG', 'SMALL', 'BIG', 'BIG', 'SMALL', 'BIG', 'BIG', 'SMALL', 'BIG', 'BIG'];

// B ‡¶ó‡ßç‡¶∞‡ßÅ‡¶™ - ‡¶∏‡¶Ç‡¶ñ‡ßç‡¶Ø‡¶æ ‡¶™‡ßç‡¶Ø‡¶æ‡¶ü‡¶æ‡¶∞‡ßç‡¶®
const PATTERN_B = {
    0: 3, // SMALL ‚Üí SMALL
    1: 2, // SMALL ‚Üí SMALL
    2: 7, // SMALL ‚Üí BIG
    3: 0, // SMALL ‚Üí SMALL
    4: 7, // SMALL ‚Üí BIG
    5: 1, // BIG ‚Üí SMALL
    6: 3, // BIG ‚Üí SMALL
    7: 8, // BIG ‚Üí BIG
    8: 7, // BIG ‚Üí BIG
    9: 7  // BIG ‚Üí BIG
};

// B ‡¶ó‡ßç‡¶∞‡ßÅ‡¶™ - ‡¶∏‡ßç‡¶≤‡¶ü ‡¶™‡ßç‡¶Ø‡¶æ‡¶ü‡¶æ‡¶∞‡ßç‡¶®
const SLOT_B = ['BIG', 'SMALL', 'BIG', 'BIG-SMALL', 'BIG', 'SMALL', 'BIG', 'BIG', 'BIG', 'BIG'];

let consecutiveLoss = 0;
let lastPrediction = null;

function getSize(num) {
    return parseInt(num) >= 5 ? 'BIG' : 'SMALL';
}

function getGroup(periodNum) {
    const groupIndex = Math.floor((periodNum - 1) / 10) % 2;
    return groupIndex === 0 ? 'A' : 'B';
}

function getPeriodSlot(periodNum) {
    const slot = periodNum % 10;
    return slot === 0 ? 10 : slot;
}

function makePrediction(data) {
    if (!data || data.length < 1) {
        return {
            prediction: 'WAIT',
            confidence: 0,
            details: '‡¶™‡¶∞‡ßç‡¶Ø‡¶æ‡¶™‡ßç‡¶§ ‡¶°‡ßá‡¶ü‡¶æ ‡¶®‡ßá‡¶á',
            group: '-',
            slot: '-',
            nextPeriod: '-'
        };
    }

    const lastItem = data[0];
    const lastNumber = parseInt(lastItem.number);
    const currentPeriod = parseInt(lastItem.period);
    const nextPeriod = currentPeriod + 1;
    const nextGroup = getGroup(nextPeriod);
    const nextSlot = getPeriodSlot(nextPeriod);

    // ‡¶∏‡¶Ç‡¶ñ‡ßç‡¶Ø‡¶æ ‡¶™‡ßç‡¶Ø‡¶æ‡¶ü‡¶æ‡¶∞‡ßç‡¶® ‡¶¶‡ßá‡¶ñ‡ßá prediction
    const numberPattern = nextGroup === 'A' ? PATTERN_A : PATTERN_B;
    const predictedNumber = numberPattern[lastNumber];
    const numberPrediction = getSize(predictedNumber);

    // ‡¶∏‡ßç‡¶≤‡¶ü ‡¶™‡ßç‡¶Ø‡¶æ‡¶ü‡¶æ‡¶∞‡ßç‡¶® ‡¶¶‡ßá‡¶ñ‡ßá prediction
    const slotPattern = nextGroup === 'A' ? SLOT_A : SLOT_B;
    const slotPrediction = slotPattern[nextSlot - 1];

    let finalPrediction, confidence, details;

    // ‡¶â‡¶≠‡¶Ø‡¶º ‡¶™‡ßç‡¶Ø‡¶æ‡¶ü‡¶æ‡¶∞‡ßç‡¶® ‡¶è‡¶ï‡¶á ‡¶π‡¶≤‡ßá
    if (numberPrediction === slotPrediction || 
        (slotPrediction === 'BIG-SMALL' && (numberPrediction === 'BIG' || numberPrediction === 'SMALL'))) {
        finalPrediction = numberPrediction;
        confidence = 80 + (consecutiveLoss * 4);
        details = `‚úÖ ‡¶¶‡ßÅ‡¶ü‡¶ø ‡¶™‡ßç‡¶Ø‡¶æ‡¶ü‡¶æ‡¶∞‡ßç‡¶® ‡¶è‡¶ï‡¶á ‡¶®‡¶ø‡¶∞‡ßç‡¶¶‡ßá‡¶∂ ‡¶ï‡¶∞‡¶õ‡ßá: <strong>${finalPrediction}</strong><br>‡¶∏‡¶Ç‡¶ñ‡ßç‡¶Ø‡¶æ ‡¶™‡ßç‡¶Ø‡¶æ‡¶ü‡¶æ‡¶∞‡ßç‡¶®: ${lastNumber} ‚Üí ${predictedNumber} (${numberPrediction})<br>‡¶∏‡ßç‡¶≤‡¶ü ‡¶™‡ßç‡¶Ø‡¶æ‡¶ü‡¶æ‡¶∞‡ßç‡¶®: ‡¶™‡¶ú‡¶ø‡¶∂‡¶® ${nextSlot} = ${slotPrediction}`;
    } else {
        // ‡¶∏‡ßç‡¶≤‡¶ü ‡¶™‡ßç‡¶Ø‡¶æ‡¶ü‡¶æ‡¶∞‡ßç‡¶® ‡¶™‡ßç‡¶∞‡¶æ‡¶ß‡¶æ‡¶®‡ßç‡¶Ø ‡¶™‡¶æ‡¶¨‡ßá
        finalPrediction = slotPrediction === 'BIG-SMALL' ? 'BIG' : slotPrediction;
        confidence = 70 + (consecutiveLoss * 4);
        details = `üìä ‡¶∏‡ßç‡¶≤‡¶ü ‡¶™‡ßç‡¶Ø‡¶æ‡¶ü‡¶æ‡¶∞‡ßç‡¶®: ‡¶™‡¶ú‡¶ø‡¶∂‡¶® ${nextSlot} = <strong>${slotPrediction}</strong><br>‡¶∏‡¶Ç‡¶ñ‡ßç‡¶Ø‡¶æ ‡¶™‡ßç‡¶Ø‡¶æ‡¶ü‡¶æ‡¶∞‡ßç‡¶®: ${lastNumber} ‚Üí ${predictedNumber} (${numberPrediction})<br>‡¶™‡ßç‡¶∞‡ßá‡¶°‡¶ø‡¶ï‡¶∂‡¶®: <strong>${finalPrediction}</strong>`;
    }

    // ‡¶≤‡¶∏ ‡¶ü‡ßç‡¶∞‡ßç‡¶Ø‡¶æ‡¶ï‡¶ø‡¶Ç
    if (consecutiveLoss > 0) {
        details += `<br>üî• <strong>${consecutiveLoss} ‡¶ü‡¶ø ‡¶ß‡¶æ‡¶∞‡¶æ‡¶¨‡¶æ‡¶π‡¶ø‡¶ï ‡¶≤‡¶∏ ‡¶™‡¶∞ ‡¶ï‡¶®‡¶´‡¶ø‡¶°‡ßá‡¶®‡ßç‡¶∏ ‡¶¨‡ßÉ‡¶¶‡ßç‡¶ß‡¶ø</strong>`;
    }

    return {
        prediction: finalPrediction,
        confidence: Math.min(confidence, 93),
        details: details,
        group: nextGroup,
        slot: nextSlot,
        nextPeriod: nextPeriod,
        numberPrediction: numberPrediction,
        slotPrediction: slotPrediction
    };
}

async function load() {
    try {
        const response = await fetch(`${API}?t=${Date.now()}`);
        const json = await response.json();

        let gameList = [];
        
        // ‡¶¨‡¶ø‡¶≠‡¶ø‡¶®‡ßç‡¶® JSON ‡¶∏‡ßç‡¶ü‡ßç‡¶∞‡¶æ‡¶ï‡¶ö‡¶æ‡¶∞ ‡¶π‡ßç‡¶Ø‡¶æ‡¶®‡ßç‡¶°‡¶≤ ‡¶ï‡¶∞‡¶æ
        if (json && json.data && json.data.list) {
            gameList = json.data.list;
        } else if (json && json.list) {
            gameList = json.list;
        } else if (Array.isArray(json)) {
            gameList = json;
        }

        if (gameList.length === 0) {
            document.getElementById('tbody').innerHTML = '<tr><td colspan="5" class="error">‡¶ï‡ßã‡¶®‡ßã ‡¶°‡ßá‡¶ü‡¶æ ‡¶™‡¶æ‡¶ì‡¶Ø‡¶º‡¶æ ‡¶Ø‡¶æ‡¶Ø‡¶º‡¶®‡¶ø</td></tr>';
            document.getElementById('predResult').textContent = '‡¶°‡ßá‡¶ü‡¶æ ‡¶®‡ßá‡¶á';
            return;
        }

        // ‡¶°‡ßá‡¶ü‡¶æ ‡¶™‡ßç‡¶∞‡¶∏‡ßá‡¶∏ ‡¶ï‡¶∞‡¶æ
        const processedData = gameList.map(item => ({
            period: String(item.issueNo || item.issue || item.period || item.issueNumber || ''),
            number: String(item.openResult || item.result || item.number || item.num || '0')
        }));

        // ‡¶™‡ßç‡¶∞‡ßá‡¶°‡¶ø‡¶ï‡¶∂‡¶® ‡¶ï‡¶∞‡¶æ
        const pred = makePrediction(processedData);

        // ‡¶π‡ßá‡¶°‡¶æ‡¶∞ ‡¶Ü‡¶™‡¶°‡ßá‡¶ü
        document.getElementById('groupBadge').innerHTML = 
            `<span class="group-badge group-${pred.group.toLowerCase()}">‡¶™‡¶∞‡¶¨‡¶∞‡ßç‡¶§‡ßÄ ‡¶ó‡ßç‡¶∞‡ßÅ‡¶™: ${pred.group}</span>`;

        // ‡¶™‡ßç‡¶∞‡ßá‡¶°‡¶ø‡¶ï‡¶∂‡¶® ‡¶∞‡ßá‡¶ú‡¶æ‡¶≤‡ßç‡¶ü
        const predClass = pred.prediction === 'BIG' ? 'pred-big' : 'pred-small';
        document.getElementById('predResult').innerHTML = 
            `<span class="${predClass}">${pred.prediction}</span>`;
        
        document.getElementById('confBadge').textContent = 
            `‡¶ï‡¶®‡¶´‡¶ø‡¶°‡ßá‡¶®‡ßç‡¶∏: ${pred.confidence}%`;
        
        document.getElementById('info').innerHTML = pred.details;

        // ‡¶∏‡ßç‡¶ü‡ßç‡¶Ø‡¶æ‡¶ü‡¶∏ ‡¶Ü‡¶™‡¶°‡ßá‡¶ü
        document.getElementById('period').textContent = processedData[0].period;
        document.getElementById('group').textContent = getGroup(parseInt(processedData[0].period));
        document.getElementById('slot').textContent = getPeriodSlot(parseInt(processedData[0].period));
        document.getElementById('loss').textContent = consecutiveLoss;

        // ‡¶ü‡ßá‡¶¨‡¶ø‡¶≤ ‡¶Ü‡¶™‡¶°‡ßá‡¶ü
        const tbody = document.getElementById('tbody');
        tbody.innerHTML = '';

        processedData.slice(0, 20).forEach((item, index) => {
            const periodNum = parseInt(item.period);
            const number = parseInt(item.number);
            const size = getSize(number);
            const group = getGroup(periodNum);
            const slot = getPeriodSlot(periodNum);

            const tr = document.createElement('tr');
            if (index === 0) tr.classList.add('current');

            tr.innerHTML = `
                <td style="font-family:monospace;color:#666;font-weight:600">${item.period}</td>
                <td><span class="group-badge group-${group.toLowerCase()}" style="font-size:10px;padding:3px 10px">${group}</span></td>
                <td style="font-weight:700;font-size:14px">${slot}</td>
                <td class="num-cell">${number}</td>
                <td><span class="size-${size.toLowerCase()}">${size}</span></td>
            `;
            
            tbody.appendChild(tr);
        });

        // ‡¶™‡ßç‡¶∞‡ßá‡¶°‡¶ø‡¶ï‡¶∂‡¶® ‡¶∏‡ßá‡¶≠ ‡¶ï‡¶∞‡¶æ (‡¶™‡¶∞‡¶¨‡¶∞‡ßç‡¶§‡ßÄ ‡¶≤‡ßã‡¶°‡ßá ‡¶≤‡¶∏ ‡¶ö‡ßá‡¶ï ‡¶ï‡¶∞‡¶æ‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø)
        lastPrediction = {
            period: pred.nextPeriod,
            prediction: pred.prediction
        };

    } catch (error) {
        console.error('Error:', error);
        document.getElementById('tbody').innerHTML = 
            `<tr><td colspan="5" class="error">‡¶è‡¶∞‡¶∞: ${error.message}</td></tr>`;
        document.getElementById('predResult').textContent = '‡¶è‡¶∞‡¶∞';
        document.getElementById('info').textContent = '‡¶°‡ßá‡¶ü‡¶æ ‡¶≤‡ßã‡¶° ‡¶ï‡¶∞‡¶§‡ßá ‡¶∏‡¶Æ‡¶∏‡ßç‡¶Ø‡¶æ ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá‡•§ ‡¶Ü‡¶¨‡¶æ‡¶∞ ‡¶ö‡ßá‡¶∑‡ßç‡¶ü‡¶æ ‡¶ï‡¶∞‡ßÅ‡¶®‡•§';
    }
}

function updateTime() {
    const now = new Date();
    const h = String(now.getHours()).padStart(2, '0');
    const m = String(now.getMinutes()).padStart(2, '0');
    const s = String(now.getSeconds()).padStart(2, '0');
    document.getElementById('time').textContent = `${h}:${m}:${s}`;
    
    // ‡¶™‡ßç‡¶∞‡¶§‡¶ø 30 ‡¶∏‡ßá‡¶ï‡ßá‡¶®‡ßç‡¶°‡ßá ‡¶Ö‡¶ü‡ßã ‡¶∞‡¶ø‡¶´‡ßç‡¶∞‡ßá‡¶∂
    if (s === '00' || s === '30') {
        setTimeout(load, 1000);
    }
}

// ‡¶á‡¶®‡¶ø‡¶∂‡¶ø‡¶Ø‡¶º‡¶æ‡¶≤‡¶æ‡¶á‡¶ú
load();
setInterval(updateTime, 1000);
updateTime();
</script>
</body>
</html>

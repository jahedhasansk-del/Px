<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1.0"/>
<title>WinGo Pro Signal</title>
<style>
*{margin:0;padding:0;box-sizing:border-box}
body{font-family:'Segoe UI',sans-serif;background:linear-gradient(135deg,#667eea,#764ba2);min-height:100vh;padding:20px}
.container{max-width:1200px;margin:0 auto}
.header{text-align:center;background:rgba(255,255,255,.95);padding:30px;border-radius:20px;box-shadow:0 20px 60px rgba(0,0,0,.3);margin-bottom:20px}
.logo{font-size:42px;background:linear-gradient(135deg,#667eea,#764ba2);-webkit-background-clip:text;-webkit-text-fill-color:transparent;font-weight:800;margin-bottom:10px}
.subtitle{color:#666;font-size:14px;text-transform:uppercase;letter-spacing:2px}
.data-count{text-align:center;color:#764ba2;font-size:14px;margin-top:10px;font-weight:600}
.pred-box{background:rgba(255,255,255,.95);border-radius:20px;padding:40px;margin-bottom:20px;box-shadow:0 20px 60px rgba(0,0,0,.3);text-align:center}
.pred-title{color:#764ba2;font-size:18px;font-weight:700;margin-bottom:20px;text-transform:uppercase}
.pred-result{font-size:72px;font-weight:900;margin:20px 0;text-transform:uppercase;letter-spacing:8px}
.pred-big{background:linear-gradient(135deg,#f093fb,#f5576c);-webkit-background-clip:text;-webkit-text-fill-color:transparent}
.pred-small{background:linear-gradient(135deg,#4facfe,#00f2fe);-webkit-background-clip:text;-webkit-text-fill-color:transparent}
.conf-badge{display:inline-block;background:linear-gradient(135deg,#667eea,#764ba2);color:white;padding:12px 30px;border-radius:50px;font-weight:700;margin:10px}
.pattern-info{background:rgba(255,215,0,.2);border:2px solid #ffd700;border-radius:15px;padding:20px;margin:10px 0}
.pattern-name{font-size:16px;font-weight:700;color:#764ba2;margin-bottom:10px}
.pattern-seq{font-size:20px;font-weight:800;color:#333;margin:15px 0;letter-spacing:3px}
.rating-badge{display:inline-block;background:linear-gradient(135deg,#ffd700,#ffed4e);color:#333;padding:8px 20px;border-radius:20px;font-weight:700;margin:5px}
.history-box{background:rgba(255,255,255,.95);border-radius:20px;padding:30px;margin-bottom:20px;box-shadow:0 20px 60px rgba(0,0,0,.3)}
.section-title{font-size:20px;font-weight:800;color:#764ba2;margin-bottom:20px;text-align:center;text-transform:uppercase}
.history-items{display:flex;gap:10px;flex-wrap:wrap;justify-content:center;margin:20px 0}
.history-item{width:50px;height:50px;border-radius:10px;display:flex;align-items:center;justify-content:center;font-weight:900;color:white;font-size:16px;border:3px solid transparent;transition:all .3s}
.item-big{background:linear-gradient(135deg,#f093fb,#f5576c)}
.item-small{background:linear-gradient(135deg,#4facfe,#00f2fe)}
.item-active{border-color:#ffd700;box-shadow:0 0 20px rgba(255,215,0,.6);transform:scale(1.15)}
.trap-section{background:rgba(255,255,255,.95);border-radius:20px;padding:30px;margin-bottom:20px;box-shadow:0 20px 60px rgba(0,0,0,.3)}
.trap-active{background:rgba(245,87,108,.1);border:3px solid #f5576c}
.trap-title{font-size:18px;font-weight:700;color:#f5576c;margin-bottom:15px;text-align:center}
.trap-info{background:rgba(255,255,255,.5);padding:15px;border-radius:10px;margin:10px 0;text-align:center}
.trap-rule{font-size:16px;font-weight:700;color:#333;margin:10px 0}
.bet-signal{font-size:24px;font-weight:900;color:#f5576c;margin:15px 0;animation:pulse 1s infinite}
@keyframes pulse{0%,100%{transform:scale(1)}50%{transform:scale(1.05)}}
.table-wrapper{background:rgba(255,255,255,.95);border-radius:20px;overflow:hidden;box-shadow:0 20px 60px rgba(0,0,0,.3);margin-bottom:20px}
table{width:100%;border-collapse:collapse}
thead{background:linear-gradient(135deg,#667eea,#764ba2)}
th{padding:15px;text-align:center;font-weight:700;color:white;font-size:13px;text-transform:uppercase}
tbody tr{border-bottom:1px solid #f0f0f0;transition:all .3s}
tbody tr:hover{background:rgba(102,126,234,.1)}
td{padding:15px;text-align:center;font-size:14px;font-weight:600}
.num-cell{font-size:28px;font-weight:900}
.size-badge{padding:6px 16px;border-radius:20px;font-size:11px;font-weight:700;text-transform:uppercase;color:white}
.badge-big{background:linear-gradient(135deg,#f093fb,#f5576c)}
.badge-small{background:linear-gradient(135deg,#4facfe,#00f2fe)}
.refresh-btn{position:fixed;bottom:30px;right:30px;background:linear-gradient(135deg,#667eea,#764ba2);color:white;border:none;padding:18px 35px;border-radius:50px;font-size:16px;font-weight:700;cursor:pointer;box-shadow:0 10px 30px rgba(102,126,234,.5);z-index:1000;transition:all .3s}
.refresh-btn:hover{transform:translateY(-3px)}
.loading{text-align:center;padding:40px;font-size:18px;color:#764ba2}
.no-bet{color:#999;font-size:20px;font-weight:700}
@media (max-width:768px){
.logo{font-size:32px}
.pred-result{font-size:48px;letter-spacing:4px}
.history-item{width:40px;height:40px;font-size:14px}
}
</style>
</head>
<body>
<div class="container">
<div class="header">
<div class="logo">‚ö° WINGO PRO SIGNAL</div>
<div class="subtitle">New Pattern System</div>
<div class="data-count" id="dataCount">Loading...</div>
</div>

<div class="pred-box">
<div class="pred-title">üéØ Master Prediction</div>
<div class="pred-result" id="predResult"><div class="loading">Analyzing...</div></div>
<div class="conf-badge" id="confBadge">Calculating...</div>
<div class="pattern-info" id="patternInfo" style="display:none">
<div class="pattern-name" id="patternName"></div>
<div class="pattern-seq" id="patternSeq"></div>
<div class="rating-badge" id="ratingBadge"></div>
</div>
</div>

<div class="history-box">
<div class="section-title">üìä Last 30 Results</div>
<div class="history-items" id="historyItems"></div>
</div>

<div class="trap-section" id="trapSection" style="display:none">
<div class="trap-title">‚ö†Ô∏è ZIG-ZAG TRAP DETECTED</div>
<div class="trap-info">
<div class="trap-rule" id="trapRule"></div>
<div class="bet-signal" id="betSignal"></div>
</div>
</div>

<div class="table-wrapper">
<table>
<thead><tr><th>Period</th><th>Number</th><th>Size</th></tr></thead>
<tbody id="tableBody"><tr><td colspan="3" class="loading">Loading...</td></tr></tbody>
</table>
</div>
</div>

<button class="refresh-btn" onclick="refreshData()">‚Üª Refresh</button>

<script>
const API='https://draw.ar-lottery01.com/WinGo/WinGo_1M/GetHistoryIssuePage.json';
let allData=[];

function getSize(n){return parseInt(n)>=5?'Big':'Small'}
function getSizeShort(n){return getSize(n)==='Big'?'B':'S'}

// Pattern Group A (35% Rating)
function checkPatternA(last3){
if(last3.length<3)return null;
const seq=last3.map(p=>getSizeShort(p.num)).join('');
if(seq==='BSB')return{name:'Pattern A1: BIG-SMALL-BIG',prediction:'Small',rating:35,sequence:'B-S-B ‚Üí S'};
if(seq==='SBS')return{name:'Pattern A2: SMALL-BIG-SMALL',prediction:'Big',rating:35,sequence:'S-B-S ‚Üí B'};
return null;
}

// Pattern Group B (70% Rating)
function checkPatternB(last5){
if(last5.length<5)return null;
const seq=last5.map(p=>getSizeShort(p.num)).join('');
if(seq==='BSBBS')return{name:'Pattern B1: BIG-SMALL-BIG-BIG-SMALL',prediction:'Small',rating:70,sequence:'B-S-B-B-S ‚Üí S'};
if(seq==='SBSSB')return{name:'Pattern B2: SMALL-BIG-SMALL-SMALL-BIG',prediction:'Big',rating:70,sequence:'S-B-S-S-B ‚Üí B'};
return null;
}

// Zig-Zag Trap Pattern
function checkZigZagTrap(last10){
if(last10.length<10)return null;
const seq=last10.map(p=>getSizeShort(p.num)).join('');

// BIG Long Trap: BSBBBBBBBBB
const bigCount=seq.split('B').length-1;
const smallCount=seq.split('S').length-1;
const lastChar=seq[0];

// Check for BIG trap (many Bs after initial BS pattern)
if(bigCount>=6&&smallCount>=1&&seq.includes('BS')){
const zigzag='BSBSBSBSBS';
let betPosition=-1;
for(let i=0;i<Math.min(seq.length,zigzag.length);i++){
if(zigzag[i]==='S'&&seq[i]==='B')betPosition=i;
}
if(betPosition>=0){
return{
type:'BIG_TRAP',
message:'BIG Long Trap Detected',
rule:'‡¶∂‡ßÅ‡¶ß‡ßÅ S ‡¶™‡¶ú‡¶ø‡¶∂‡¶®‡ßá BET ‚Üí BIG | B ‡¶™‡¶ú‡¶ø‡¶∂‡¶®‡ßá NO BET',
betSignal:'BET: BIG',
shouldBet:zigzag[0]==='S',
sequence:seq
};
}
}

// Check for SMALL trap (many Ss after initial SB pattern)
if(smallCount>=6&&bigCount>=1&&seq.includes('SB')){
const zigzag='SBSBSBSBSB';
let betPosition=-1;
for(let i=0;i<Math.min(seq.length,zigzag.length);i++){
if(zigzag[i]==='B'&&seq[i]==='S')betPosition=i;
}
if(betPosition>=0){
return{
type:'SMALL_TRAP',
message:'SMALL Long Trap Detected',
rule:'‡¶∂‡ßÅ‡¶ß‡ßÅ B ‡¶™‡¶ú‡¶ø‡¶∂‡¶®‡ßá BET ‚Üí SMALL | S ‡¶™‡¶ú‡¶ø‡¶∂‡¶®‡ßá NO BET',
betSignal:'BET: SMALL',
shouldBet:zigzag[0]==='B',
sequence:seq
};
}
}

return null;
}

function analyzePrediction(data){
if(data.length<5)return null;

const last3=data.slice(0,3);
const last5=data.slice(0,5);
const last10=data.slice(0,10);

// Check Pattern B first (higher rating)
const patternB=checkPatternB(last5);
if(patternB)return{type:'PATTERN_B',data:patternB,trap:null};

// Check Pattern A
const patternA=checkPatternA(last3);
if(patternA)return{type:'PATTERN_A',data:patternA,trap:null};

// Check Zig-Zag Trap
const trap=checkZigZagTrap(last10);
if(trap)return{type:'TRAP',data:null,trap:trap};

return null;
}

async function loadData(){
try{
const res=await fetch(`${API}?ts=${Date.now()}`);
const json=await res.json();
let gameList=[];
if(json?.data?.list)gameList=json.data.list;
else if(json?.list)gameList=json.list;
else if(Array.isArray(json))gameList=json;

if(gameList.length===0){
document.getElementById('tableBody').innerHTML='<tr><td colspan="3">No data</td></tr>';
return;
}

allData=gameList.map(item=>({
period:String(item.issue||item.period||''),
num:String(item.result||item.number||item.num||'0')
})).slice(0,300);

// Update data count
document.getElementById('dataCount').textContent=`Total Results: ${allData.length}/300`;

// Display history
const histCont=document.getElementById('historyItems');
histCont.innerHTML='';
allData.slice(0,30).forEach((item,idx)=>{
const div=document.createElement('div');
const size=getSize(item.num);
div.className=`history-item item-${size.toLowerCase()}${idx===0?' item-active':''}`;
div.textContent=getSizeShort(item.num);
histCont.appendChild(div);
});

// Analyze prediction
const analysis=analyzePrediction(allData);
const predResult=document.getElementById('predResult');
const confBadge=document.getElementById('confBadge');
const patternInfo=document.getElementById('patternInfo');
const trapSection=document.getElementById('trapSection');

if(analysis){
if(analysis.type==='PATTERN_A'||analysis.type==='PATTERN_B'){
const p=analysis.data;
const predClass=p.prediction.toLowerCase();
predResult.innerHTML=`<span class="pred-${predClass}">${p.prediction.toUpperCase()}</span>`;
confBadge.textContent=`Confidence: ${p.rating}%`;
patternInfo.style.display='block';
document.getElementById('patternName').textContent=p.name;
document.getElementById('patternSeq').textContent=p.sequence;
document.getElementById('ratingBadge').textContent=`Rating: ${p.rating}%`;
trapSection.style.display='none';
}else if(analysis.type==='TRAP'){
const t=analysis.trap;
if(t.shouldBet){
const betText=t.type==='BIG_TRAP'?'BIG':'SMALL';
predResult.innerHTML=`<span class="pred-${betText.toLowerCase()}">${betText}</span>`;
confBadge.textContent='Zig-Zag Trap Active';
}else{
predResult.innerHTML='<span class="no-bet">NO BET</span>';
confBadge.textContent='Wait for Position';
}
patternInfo.style.display='none';
trapSection.style.display='block';
trapSection.classList.add('trap-active');
document.getElementById('trapRule').textContent=t.rule;
document.getElementById('betSignal').textContent=t.shouldBet?t.betSignal:'‚õî NO BET';
}
}else{
predResult.innerHTML='<span style="color:#999">No Pattern</span>';
confBadge.textContent='Wait for Pattern';
patternInfo.style.display='none';
trapSection.style.display='none';
}

// Display table
const tbody=document.getElementById('tableBody');
tbody.innerHTML='';
allData.slice(0,100).forEach(item=>{
const tr=document.createElement('tr');
const size=getSize(item.num);
tr.innerHTML=`
<td>${item.period.slice(-6)}</td>
<td class="num-cell">${item.num}</td>
<td><span class="size-badge badge-${size.toLowerCase()}">${size}</span></td>
`;
tbody.appendChild(tr);
});

}catch(err){
console.error('Error:',err);
document.getElementById('tableBody').innerHTML='<tr><td colspan="3">Error loading data</td></tr>';
}
}

function refreshData(){
loadData();
}

loadData();
setInterval(loadData,30000); // Auto refresh every 30 seconds
</script>
</body>
</html>

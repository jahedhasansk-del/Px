<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1.0">
<title>WinGo Pro Signal</title>
<style>
*{margin:0;padding:0;box-sizing:border-box}
body{font-family:'Segoe UI',Tahoma,Geneva,Verdana,sans-serif;background:linear-gradient(135deg,#667eea 0%,#764ba2 100%);min-height:100vh;padding:20px}
.container{max-width:900px;margin:0 auto}
.header{text-align:center;margin-bottom:30px;background:rgba(255,255,255,.95);padding:30px;border-radius:20px;box-shadow:0 20px 60px rgba(0,0,0,.3)}
.logo{font-size:42px;background:linear-gradient(135deg,#667eea 0%,#764ba2 100%);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text;font-weight:800;margin-bottom:10px;letter-spacing:2px}
.subtitle{color:#666;font-size:14px;letter-spacing:3px;text-transform:uppercase;font-weight:600}
.prediction-box{background:rgba(255,255,255,.95);border-radius:20px;padding:40px;margin-bottom:25px;box-shadow:0 20px 60px rgba(0,0,0,.3)}
.pred-title{text-align:center;color:#764ba2;font-size:16px;font-weight:700;text-transform:uppercase;letter-spacing:2px;margin-bottom:25px}
.pred-result{text-align:center;font-size:72px;font-weight:900;margin-bottom:20px;text-transform:uppercase;letter-spacing:8px}
.pred-big{background:linear-gradient(135deg,#f093fb 0%,#f5576c 100%);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text}
.pred-small{background:linear-gradient(135deg,#4facfe 0%,#00f2fe 100%);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text}
.confidence-info{display:flex;justify-content:center;align-items:center;gap:15px;margin-top:20px;flex-wrap:wrap}
.conf-badge{background:linear-gradient(135deg,#667eea 0%,#764ba2 100%);color:white;padding:12px 30px;border-radius:50px;font-weight:700;font-size:14px;text-transform:uppercase;letter-spacing:1px}
.pattern-badge{background:linear-gradient(135deg,#00f2fe 0%,#4facfe 100%);color:white;padding:12px 25px;border-radius:50px;font-weight:700;font-size:13px}
.loss-indicator{background:linear-gradient(135deg,#f5576c 0%,#f093fb 100%);color:white;padding:12px 25px;border-radius:50px;font-weight:700;font-size:13px}
.stats-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(160px,1fr));gap:20px;margin-bottom:25px}
.stat-card{background:rgba(255,255,255,.95);border-radius:15px;padding:25px;text-align:center;box-shadow:0 10px 30px rgba(0,0,0,.2)}
.stat-label{font-size:12px;color:#888;text-transform:uppercase;letter-spacing:1px;margin-bottom:10px;font-weight:600}
.stat-value{font-size:36px;font-weight:900;background:linear-gradient(135deg,#667eea 0%,#764ba2 100%);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text}
.stat-win{background:linear-gradient(135deg,#4facfe 0%,#00f2fe 100%);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text}
.stat-loss{background:linear-gradient(135deg,#f5576c 0%,#f093fb 100%);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text}
.history-section{background:rgba(255,255,255,.95);border-radius:20px;padding:30px;box-shadow:0 20px 60px rgba(0,0,0,.3);margin-bottom:25px}
.section-title{font-size:20px;font-weight:800;color:#764ba2;margin-bottom:20px;text-transform:uppercase;letter-spacing:2px;text-align:center}
.history-grid{display:grid;grid-template-columns:repeat(5,1fr);gap:15px;margin-bottom:20px}
.history-item{background:linear-gradient(135deg,#f5f7fa 0%,#c3cfe2 100%);border-radius:12px;padding:15px;text-align:center}
.history-big{border-left:5px solid #f5576c}
.history-small{border-left:5px solid #4facfe}
.history-label{font-size:11px;color:#666;text-transform:uppercase;margin-bottom:5px;font-weight:600}
.history-value{font-size:22px;font-weight:900;color:#333}
.table-wrapper{background:rgba(255,255,255,.95);border-radius:20px;overflow:hidden;box-shadow:0 20px 60px rgba(0,0,0,.3)}
table{width:100%;border-collapse:collapse}
thead{background:linear-gradient(135deg,#667eea 0%,#764ba2 100%)}
th{padding:18px 12px;text-align:center;font-weight:700;color:white;font-size:13px;text-transform:uppercase;letter-spacing:1px}
tbody tr{border-bottom:1px solid #f0f0f0}
td{padding:16px 12px;text-align:center;color:#333;font-size:13px;font-weight:600}
.period-cell{font-family:'Courier New',monospace;font-size:12px;color:#666}
.num-cell{font-size:28px;font-weight:900}
.size-badge{display:inline-block;padding:6px 16px;border-radius:20px;font-size:11px;font-weight:700;text-transform:uppercase;letter-spacing:1px}
.size-big{background:linear-gradient(135deg,#f093fb 0%,#f5576c 100%);color:white}
.size-small{background:linear-gradient(135deg,#4facfe 0%,#00f2fe 100%);color:white}
.color-dots{display:flex;justify-content:center;gap:6px}
.dot{width:18px;height:18px;border-radius:50%;border:2px solid white;box-shadow:0 2px 8px rgba(0,0,0,.2)}
.dot-red{background:#f5576c}
.dot-green{background:#00f2fe}
.dot-violet{background:#764ba2}
.result-badge{padding:6px 16px;border-radius:20px;font-size:11px;font-weight:700;text-transform:uppercase}
.result-win{background:#4facfe;color:white}
.result-loss{background:#f5576c;color:white}
.refresh-btn{position:fixed;bottom:30px;right:30px;background:linear-gradient(135deg,#667eea 0%,#764ba2 100%);color:white;border:none;padding:18px 35px;border-radius:50px;font-size:16px;font-weight:700;cursor:pointer;box-shadow:0 10px 30px rgba(102,126,234,.5);z-index:1000;text-transform:uppercase;letter-spacing:1px}
.time-display{text-align:center;margin-top:20px;padding:15px;background:rgba(255,255,255,.2);border-radius:15px}
.current-time{font-size:32px;font-weight:900;color:white;text-shadow:0 2px 10px rgba(0,0,0,.3);letter-spacing:2px}
.loading{text-align:center;padding:20px;color:#764ba2;font-size:16px;font-weight:600}
@media (max-width:768px){
.logo{font-size:32px}
.pred-result{font-size:48px;letter-spacing:4px}
.stats-grid{grid-template-columns:repeat(2,1fr)}
.history-grid{grid-template-columns:repeat(3,1fr)}
}
</style>
</head>
<body>
<div class="container">
<div class="header">
<div class="logo">âš¡ WINGO PRO SIGNAL</div>
<div class="subtitle">Advanced Pattern Analyzer</div>
</div>
<div class="prediction-box">
<div class="pred-title">ðŸŽ¯ Next Prediction</div>
<div class="pred-result" id="predResult"><div class="loading">Analyzing...</div></div>
<div class="confidence-info">
<div class="conf-badge" id="confBadge">Calculating...</div>
<div class="pattern-badge" id="patternBadge" style="display:none"></div>
<div class="loss-indicator" id="lossIndicator" style="display:none"></div>
</div>
</div>
<div class="stats-grid">
<div class="stat-card">
<div class="stat-label">Total Win</div>
<div class="stat-value stat-win" id="winCount">0</div>
</div>
<div class="stat-card">
<div class="stat-label">Total Loss</div>
<div class="stat-value stat-loss" id="lossCountStat">0</div>
</div>
<div class="stat-card">
<div class="stat-label">Total Games</div>
<div class="stat-value" id="totalGames">0</div>
</div>
<div class="stat-card">
<div class="stat-label">Accuracy</div>
<div class="stat-value" id="accuracy">0%</div>
</div>
<div class="stat-card">
<div class="stat-label">Patterns</div>
<div class="stat-value" id="patternCount">0</div>
</div>
</div>
<div class="history-section">
<div class="section-title">ðŸ“Š Last 10 History Pattern</div>
<div class="history-grid" id="historyPattern"></div>
</div>
<div class="table-wrapper">
<table>
<thead>
<tr>
<th>Period</th>
<th>Number</th>
<th>Size</th>
<th>Color</th>
<th>Result</th>
</tr>
</thead>
<tbody id="tableBody">
<tr><td colspan="5" class="loading">Loading data...</td></tr>
</tbody>
</table>
</div>
<div class="time-display">
<div class="current-time" id="currentTime">00:00:00</div>
</div>
</div>
<button class="refresh-btn" onclick="refreshData()">â†» Refresh</button>
<script>
const API='https://draw.ar-lottery01.com/WinGo/WinGo_1M/GetHistoryIssuePage.json';
let patternDB=[],gameHistory=[],currentPred=null,lastPeriod=null,lossStreak=0;

function getSize(n){return parseInt(n)>=5?'Big':'Small'}

function getColors(n){
const x=parseInt(n);
if(x===0)return['red','violet'];
if(x===5)return['green','violet'];
return x%2===0?['red']:['green'];
}

function getLastDigit(p){
const s=String(p);
return parseInt(s[s.length-1]);
}

function buildPatternGroups(data){
patternDB=[];
let i=0;
while(i+10<data.length){
const group=[];
for(let j=0;j<10;j++){
const item=data[i+j];
const period=String(item.issue||item.period||item.issueNo||item.periodId||'');
const num=String(item.result||item.number||item.num||item.openResult||'0');
const size=getSize(num);
group.push({period:period,number:num,size:size});
}
const nextItem=data[i+10];
if(nextItem){
const nextPeriod=String(nextItem.issue||nextItem.period||nextItem.issueNo||nextItem.periodId||'');
const nextNum=String(nextItem.result||nextItem.number||nextItem.num||nextItem.openResult||'0');
const nextSize=getSize(nextNum);
patternDB.push({
pattern:group.map(g=>g.size),
nextSize:nextSize,
startPeriod:group[0].period,
endPeriod:group[9].period
});
}
i+=10;
}
console.log('Pattern groups built:',patternDB.length);
}

function findMatchingPatterns(recent2){
if(recent2.length<2)return[];
const matches=[];
for(let i=0;i<patternDB.length;i++){
const p=patternDB[i];
if(p.pattern.length>=2&&p.pattern[0]===recent2[0]&&p.pattern[1]===recent2[1]){
matches.push(p);
}
}
return matches;
}

function calculatePrediction(last10Sizes){
if(last10Sizes.length<10)return{prediction:'Big',confidence:50,matched:0};
const recent2=[last10Sizes[0],last10Sizes[1]];
const matches=findMatchingPatterns(recent2);
console.log('Matches found:',matches.length);

if(matches.length>0){
let bigCount=0,smallCount=0;
matches.forEach(m=>{
if(m.nextSize==='Big')bigCount++;
else smallCount++;
});
const pred=bigCount>smallCount?'Big':'Small';
const total=bigCount+smallCount;
const conf=Math.min(95,Math.round((Math.max(bigCount,smallCount)/total)*100));
return{prediction:pred,confidence:conf,matched:matches.length};
}

let bC=0,sC=0;
last10Sizes.forEach(s=>{if(s==='Big')bC++;else sC++;});

let p,c;
if(lossStreak>=2){
p=bC>sC?'Small':'Big';
c=70+Math.min(lossStreak*5,20);
}else{
p=bC>sC?'Big':'Small';
const d=Math.abs(bC-sC);
if(d>=7)c=90;else if(d>=5)c=80;else if(d>=3)c=70;else c=60;
}
return{prediction:p,confidence:c,matched:0};
}

async function loadData(){
try{
const response=await fetch(API+'?t='+Date.now());
const data=await response.json();
console.log('API Response:',data);

let gameList=[];
if(data&&data.data&&data.data.list){
gameList=data.data.list;
}else if(data&&data.list){
gameList=data.list;
}else if(Array.isArray(data)){
gameList=data;
}

if(gameList.length===0){
document.getElementById('tableBody').innerHTML='<tr><td colspan="5" class="loading">No data available</td></tr>';
return;
}

buildPatternGroups(gameList);

const last10Items=gameList.slice(0,10);
const last10Sizes=last10Items.map(item=>{
const num=String(item.result||item.number||item.num||item.openResult||'0');
return getSize(num);
});

const patternDiv=document.getElementById('historyPattern');
patternDiv.innerHTML='';
last10Sizes.forEach((sz,idx)=>{
const div=document.createElement('div');
div.className='history-item '+(sz==='Big'?'history-big':'history-small');
div.innerHTML='<div class="history-label">#'+(idx+1)+'</div><div class="history-value">'+sz+'</div>';
patternDiv.appendChild(div);
});

const currentItem=gameList[0];
const currentPeriod=String(currentItem.issue||currentItem.period||currentItem.issueNo||currentItem.periodId||'');
const currentNumber=String(currentItem.result||currentItem.number||currentItem.num||currentItem.openResult||'0');
const currentSize=getSize(currentNumber);

console.log('Current Period:',currentPeriod,'Number:',currentNumber,'Size:',currentSize);

if(lastPeriod&&lastPeriod!==currentPeriod){
if(currentPred){
const isWin=currentPred.prediction===currentSize;
gameHistory.unshift({
period:currentPeriod,
number:currentNumber,
predicted:currentPred.prediction,
actual:currentSize,
result:isWin?'Win':'Loss'
});
if(gameHistory.length>500)gameHistory=gameHistory.slice(0,500);
console.log('Game result:',isWin?'WIN':'LOSS');
if(isWin)lossStreak=0;
else lossStreak++;
}
}

lastPeriod=currentPeriod;

currentPred=calculatePrediction(last10Sizes);
console.log('Prediction:',currentPred);

const predResult=document.getElementById('predResult');
const confBadge=document.getElementById('confBadge');
const patternBadge=document.getElementById('patternBadge');
const lossInd=document.getElementById('lossIndicator');

if(currentPred){
predResult.innerHTML='<span class="pred-'+(currentPred.prediction==='Big'?'big':'small')+'">'+currentPred.prediction+'</span>';
confBadge.textContent='Confidence: '+currentPred.confidence+'%';

if(currentPred.matched>0){
patternBadge.style.display='block';
patternBadge.textContent='Matched: '+currentPred.matched+' Patterns';
}else{
patternBadge.style.display='none';
}

if(lossStreak>=2){
lossInd.style.display='block';
lossInd.textContent='âš ï¸ Loss: '+lossStreak;
}else{
lossInd.style.display='none';
}
}

let winC=0,lossC=0;
gameHistory.forEach(g=>{
if(g.result==='Win')winC++;
else lossC++;
});
const totalG=winC+lossC;
const accRate=totalG>0?Math.round((winC/totalG)*100):0;

document.getElementById('winCount').textContent=winC;
document.getElementById('lossCountStat').textContent=lossC;
document.getElementById('totalGames').textContent=totalG;
document.getElementById('accuracy').textContent=accRate+'%';
document.getElementById('patternCount').textContent=patternDB.length;

const tbody=document.getElementById('tableBody');
tbody.innerHTML='';
gameList.slice(0,20).forEach(item=>{
const period=String(item.issue||item.period||item.issueNo||item.periodId||item.issueNumber||'N/A');
const num=String(item.result||item.number||item.num||item.openResult||'0');
const size=getSize(num);
const colors=getColors(parseInt(num));

const matchedGame=gameHistory.find(g=>g.period===period);

const tr=document.createElement('tr');

const td1=document.createElement('td');
td1.className='period-cell';
td1.textContent=period;

const td2=document.createElement('td');
td2.className='num-cell';
td2.textContent=num;

const td3=document.createElement('td');
td3.innerHTML='<span class="size-badge size-'+(size==='Big'?'big':'small')+'">'+size+'</span>';

const td4=document.createElement('td');
td4.className='color-dots';
colors.forEach(color=>{
const dot=document.createElement('span');
dot.className='dot dot-'+color;
td4.appendChild(dot);
});

const td5=document.createElement('td');
if(matchedGame){
if(matchedGame.result==='Win'){
td5.innerHTML='<span class="result-badge result-win">âœ“ WIN</span>';
}else{
td5.innerHTML='<span class="result-badge result-loss">âœ— LOSS</span>';
}
}else{
td5.textContent='-';
}

tr.appendChild(td1);
tr.appendChild(td2);
tr.appendChild(td3);
tr.appendChild(td4);
tr.appendChild(td5);
tbody.appendChild(tr);
});

}catch(error){
console.error('Error loading data:',error);
document.getElementById('tableBody').innerHTML='<tr><td colspan="5" class="loading">Error: '+error.message+'</td></tr>';
}
}

function updateTime(){
const now=new Date();
const h=String(now.getHours()).padStart(2,'0');
const m=String(now.getMinutes()).padStart(2,'0');
const s=String(now.getSeconds()).padStart(2,'0');
document.getElementById('currentTime').textContent=h+':'+m+':'+s;
if(s==='59'){
setTimeout(()=>{
console.log('Auto refresh at 59 seconds');
loadData();
},1000);
}
}

function refreshData(){
console.log('Manual refresh');
loadData();
}

console.log('App initialized');
loadData();
setInterval(updateTime,1000);
updateTime();
</script>
</body>
</html>
